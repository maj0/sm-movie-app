describe('movie service', function() {
	var movieData = {"Search":[{"page":1,"total_results":136,"total_pages":7,"results":[{"original_name":"Star Wars: The Clone Wars","id":4194,"media_type":"tv","name":"Star Wars: The Clone Wars","vote_count":89,"vote_average":7.35,"poster_path":"\/k2D7iNM612FfCg25VdwiA53tjiO.jpg","first_air_date":"2008-10-03","popularity":15.255139,"genre_ids":[10759,16,10765],"original_language":"en","backdrop_path":"\/gAlEO2hFU29uFv6RcC7efps0iL9.jpg","overview":"Star Wars: The Clone Wars is an Emmy Award-winning American 3D CGI animated television series created by George Lucas and produced by Lucasfilm Animation with the division Lucasfilm Animation Singapore, Lucasfilm and CGCG Inc. The series debuted on the US version of Cartoon Network on October 3, 2008. It is set in the fictional Star Wars galaxy, during the same time period as the previous 2003 Star Wars: Clone Wars series. Each episode has a running time of 22 minutes, to fill a half-hour time slot. In 2007, Star Wars creator George Lucas stated \"there will be at least 100 episodes produced [about five seasons]\". Dave Filoni is the supervising director of the series. Genndy Tartakovsky, director of the first Clone Wars series, was not involved with the production, but character designer Kilian Plunkett referred to the character designs from the 2D series when designing the characters for the 3D series. There is also an online comic, depicting story-snippets between the single episodes.\n\nThe first trailer for the series was released on the official Star Wars website on May 8, 2007. The series was launched with an animated feature film, which was released in theaters on August 15, 2008. Season 2 ended on April 30, 2010. Season 3 premiered on September 17, 2010, with the complete second season releasing on Blu-ray Disc and DVD October 26, 2010. Season 4 premiered on September 16, 2011 with the Complete Season 3 on Blu-ray Disc and DVD released October 18, 2011. The fourth season was released for Blu-ray Disc and DVD release on October 23, 2012. Season 5 premiered on September 29, 2012 with a new time slot of 9:30 A.M. PT\/ET.","origin_country":["SG","US"]},{"original_name":"Star Wars Rebels","id":60554,"media_type":"tv","name":"Star Wars Rebels","vote_count":82,"vote_average":6.52,"poster_path":"\/dfzbkhKMnkdwiG1AAIJnrc9SDdY.jpg","first_air_date":"2014-10-13","popularity":14.337031,"genre_ids":[10759,16],"original_language":"en","backdrop_path":"\/2haokMQ2dFQK2z1R9gZrH9qAeqk.jpg","overview":"Set between the events of Star Wars: Episodes III and IV, the story unfolds during a dark time when the evil Galactic Empire is tightening its grip of power on the galaxy. Imperial forces have occupied a remote planet and are ruining the lives of its people. The motley but clever crew of the starship Ghost — cowboy Jedi Kanan, ace pilot Hera, street-smart teenager Ezra, the “muscle” Zeb, warrior firebrand Sabine, and cantankerous old astromech droid Chopper — is among a select few who are brave enough to stand against the Empire. Together, they will face threatening new villains, encounter colorful adversaries, embark on thrilling adventures, and become heroes with the power to ignite a rebellion.","origin_country":["US"]},{"vote_average":8,"vote_count":6124,"id":11,"video":false,"media_type":"movie","title":"Star Wars","popularity":8.906822,"poster_path":"\/tvSlBzAdRE29bZe5yYWrJ2ds137.jpg","original_language":"en","original_title":"Star Wars","genre_ids":[12,28,878],"backdrop_path":"\/4iJfYYoQzZcONB9hNzg0J0wWyPH.jpg","adult":false,"overview":"Princess Leia is captured and held hostage by the evil Imperial forces in their effort to take over the galactic Empire. Venturesome Luke Skywalker and dashing captain Han Solo team together with the loveable robot duo R2-D2 and C-3PO to rescue the beautiful princess and restore peace and justice in the Empire.","release_date":"1977-05-25"},{"original_name":"Star Wars: Clone Wars","id":3122,"media_type":"tv","name":"Star Wars: Clone Wars","vote_count":24,"vote_average":6.52,"poster_path":"\/3Uv9vwC8t8h9YXALdZFzDNihfku.jpg","first_air_date":"2003-11-07","popularity":3.360588,"genre_ids":[10759,16],"original_language":"en","backdrop_path":"\/3cm01zF1SBEhYfmpsPiDqIe2Rcn.jpg","overview":"Star Wars: Clone Wars is an Emmy Award- and Annie Award-winning American animated microseries set in the Star Wars universe.\n\nChronologically, the series takes place during the three-year time period between the prequel films Attack of the Clones and Revenge of the Sith. The show depicted the actions of various characters in the Star Wars prequel trilogy, including Anakin Skywalker, Obi-Wan Kenobi, Mace Windu, and other Knights of the Jedi Order during the conflict, leading the clone trooper forces of the Galactic Republic against the battle droid armies of the Confederacy of Independent Systems and the Sith.\n\nThe series was produced by Cartoon Network Studios in association with Lucasfilm Ltd., and was aired both online and on Cartoon Network in 25 chapters from 2003 to 2005. The first two seasons, comprising Volume One, were produced in a two to three minute \"micro\" format, while season three was produced as fifteen minute episodes making up Volume Two. Both volumes were later released on home video edited as feature length films. It was ranked 21 on IGN's Top 100 Animated Series list. Entertainment Weekly ranked the series 20th out of 25 of the best science-fiction films or television of the past 25 years.","origin_country":["US"]},{"vote_average":7.5,"vote_count":7274,"id":140607,"video":false,"media_type":"movie","title":"Star Wars: The Force Awakens","popularity":11.073721,"poster_path":"\/weUSwMdQIa3NaXVzwUoIIcAi85d.jpg","original_language":"en","original_title":"Star Wars: The Force Awakens","genre_ids":[28,12,878,14],"backdrop_path":"\/c2Ax8Rox5g6CneChwy1gmu4UbSb.jpg","adult":false,"overview":"Thirty years after defeating the Galactic Empire, Han Solo and his allies face a new threat from the evil Kylo Ren and his army of Stormtroopers.","release_date":"2015-12-15"},{"original_name":"Star Wars: Forces of Destiny","id":71412,"media_type":"tv","name":"Star Wars: Forces of Destiny","vote_count":2,"vote_average":6.5,"poster_path":"\/2MEFRf1iBR5goKiLm4xYznxQEvJ.jpg","first_air_date":"2017-07-03","popularity":2.450223,"genre_ids":[10765,16],"original_language":"en","backdrop_path":"\/iHfyFYYFtceiJ5Zq7S6qMpmRggm.jpg","overview":"An animated micro-series starring Rey, Jyn Erso, Princess Leia, Ahsoka Tano, and more. Small moments and everyday decisions shape a larger heroic saga.","origin_country":["US"]},{"vote_average":7.4,"vote_count":4410,"id":330459,"video":false,"media_type":"movie","title":"Rogue One: A Star Wars Story","popularity":10.807918,"poster_path":"\/qjiskwlV1qQzRCjpV0cL9pEMF9a.jpg","original_language":"en","original_title":"Rogue One: A Star Wars Story","genre_ids":[12,878,28],"backdrop_path":"\/tZjVVIYXACV4IIIhXeIM59ytqwS.jpg","adult":false,"overview":"A rogue band of resistance fighters unite for a mission to steal the Death Star plans and bring a new hope to the galaxy.","release_date":"2016-12-14"},{"vote_average":5.8,"vote_count":400,"id":12180,"video":false,"media_type":"movie","title":"Star Wars: The Clone Wars","popularity":3.356533,"poster_path":"\/xd6yhmtS6mEURZLwUDT5raEMbf.jpg","original_language":"en","original_title":"Star Wars: The Clone Wars","genre_ids":[53,16,28,878,12,14],"backdrop_path":"\/b3w2eXhAZvk79dMtIBTEBf8FXjc.jpg","adult":false,"overview":"Set between Episode II and III the Clone Wars is the first computer animated Star Wars film. Anakin and Obi Wan must find out who kidnapped Jabba the Hutts son and return him safely. The Seperatists will try anything to stop them and ruin any chance of a diplomatic agreement between the Hutt's and the Republic.","release_date":"2008-08-05"},{"vote_average":0,"vote_count":0,"id":181808,"video":false,"media_type":"movie","title":"Star Wars: The Last Jedi","popularity":5.630809,"poster_path":"\/1539H2E75rOC9HUA2kSOhDE4d2A.jpg","original_language":"en","original_title":"Star Wars: The Last Jedi","genre_ids":[28,12,14,878],"backdrop_path":"\/c4Dw37VZjBmObmJw9bmt8IDwMZH.jpg","adult":false,"overview":"Having taken her first steps into a larger world in Star Wars: The Force Awakens (2015), Rey continues her epic journey with Finn, Poe and Luke Skywalker in the next chapter of the saga.","release_date":"2017-12-13"},{"original_name":"Star Wars: Droids","id":25,"media_type":"tv","name":"Star Wars: Droids","vote_count":2,"vote_average":5.5,"poster_path":"\/xfqRg4m504ovzBDriizqEnUHEWg.jpg","first_air_date":"1985-09-07","popularity":2.005913,"genre_ids":[10762,16,35,10759],"original_language":"en","backdrop_path":"\/5AS13jFoVGB7fq5p4HVONKPjxQd.jpg","overview":"Star Wars: Droids, also known as Droids: The Adventures of R2-D2 and C-3PO, and 2004 re-released on DVD as Star Wars Animated Adventures: Droids, is an animated television series that features the exploits of R2-D2 and C-3PO, the droids who have appeared in all six Star Wars films. The series takes place between the events depicted in Star Wars Episode III: Revenge of the Sith and Star Wars Episode IV: A New Hope.\n\nOver the course of the series, the droids team up with four different sets of masters. The series is divided up into three cycles: at the beginning of each, the droids usually run into their new masters in an accidental way, and at the end of each cycle, they usually are forced to leave their masters for one reason or another. The Great Heep, a television special following the series, served as a prequel to the third Mungo Baobab cycle.\n\nThe series' opening theme, \"Trouble Again,\" was performed by Stewart Copeland of the Police and written by Copeland and Derek Holt.","origin_country":["US","CA"]},{"vote_average":6.9,"vote_count":53,"id":42979,"video":true,"media_type":"movie","title":"Robot Chicken: Star Wars","popularity":2.608352,"poster_path":"\/kWKspQ7YiQ82xXM1jVbIbqh5OyV.jpg","original_language":"en","original_title":"Robot Chicken: Star Wars","genre_ids":[16,35,878],"backdrop_path":"\/gZxY7VDOI48gjhnDJK1E6n9uHWk.jpg","adult":false,"overview":"Fans of Adult Swim's \"Robot Chicken\" and the Star Wars movie franchise won't want to miss this collection of 30 sketches. This hilarious compilation features an array of skits -- such as \"Darth Vader's Collect Call\" and \"Inside the AT-AT\" -- as well as the incredible voice talents of Hulk Hogan, Malcolm McDowell, Conan O'Brien and even the original Luke Skywalker himself, Mark Hamill.","release_date":"2007-07-17"},{"original_name":"Lego Star Wars: Droid Tales","id":63722,"media_type":"tv","name":"Lego Star Wars: Droid Tales","vote_count":5,"vote_average":6.75,"poster_path":"\/2eSTFO6PimOGORZrhjlyU2hqeiR.jpg","first_air_date":"2015-10-05","popularity":2.340461,"genre_ids":[16],"original_language":"en","backdrop_path":"\/5NCO3bOn8N8cMaJAxKNtpaBZPZH.jpg","overview":"Following their victory celebration in the Ewok village on Endor, seen at the close of Star Wars: Return of the Jedi, C-3PO and R2-D2 have gathered to regale Luke, Leia, Han, Chewbacca and the other Rebels with the tales of their adventures that led to the events of Star Wars: The Phantom Menace. An accidental kidnapping occurs while the droids are reminiscing and suddenly viewers are taken on a new adventure that leads to encounters with familiar faces and places that prompt the re-telling of the entire saga. The series offers all of the playful humor that viewers expect from LEGO Star Wars.","origin_country":["US"]},{"vote_average":0,"vote_count":26,"id":181812,"video":false,"media_type":"movie","title":"Star Wars: Episode IX","popularity":2.410218,"poster_path":"\/yVYTFvIiKyr6vsrPw3o5C6t2eoL.jpg","original_language":"en","original_title":"Star Wars: Episode IX","genre_ids":[28,12,878],"backdrop_path":"\/i0NGCiMxL4NIVk2hhjtVgnNYZ3a.jpg","adult":false,"overview":"","release_date":"2019-05-22"},{"original_name":"Star Wars: Ewoks","id":3478,"media_type":"tv","name":"Star Wars: Ewoks","vote_count":3,"vote_average":5.67,"poster_path":"\/tuwV4i5zktlQHrIpaysNfb5Ae2y.jpg","first_air_date":"1985-09-07","popularity":1.643999,"genre_ids":[16,10765],"original_language":"en","backdrop_path":"\/a2oOSExT1KrkczNafY3nbmwd403.jpg","overview":"Star Wars: Ewoks is an American\/Canadian animated television series featuring the Ewok characters introduced in Star Wars Episode VI: Return of the Jedi. It aired for two seasons between 1985 and 1986.\n\nThe series was produced by Nelvana on behalf of Lucasfilm and broadcast on ABC, both by itself and later, as part of The Ewoks and Droids Adventure Hour. The first season was advertised as simply Ewoks, but the second season was advertised as The All New Ewoks. The series lasted 35 episodes.","origin_country":["US","CA"]},{"original_name":"Lego Star Wars: The Yoda Chronicles","id":61513,"media_type":"tv","name":"Lego Star Wars: The Yoda Chronicles","vote_count":3,"vote_average":6.17,"poster_path":"\/1S1j1QxwLNPNiUrq8GSg05KkAmY.jpg","first_air_date":"2013-05-29","popularity":2.651764,"genre_ids":[10765,10759],"original_language":"en","backdrop_path":"\/cogF5KmbzRUlbegpRZstmrKZLOs.jpg","overview":"Yoda begins by training Padawans at the Jedi Temple Academy, but then he feels a disturbance in the Force and rushes off to fight the Dark Side.","origin_country":["US"]},{"vote_average":6.3,"vote_count":4055,"id":1893,"video":false,"media_type":"movie","title":"Star Wars: Episode I - The Phantom Menace","popularity":4.825732,"poster_path":"\/n8V09dDc02KsSN6Q4hC2BX6hN8X.jpg","original_language":"en","original_title":"Star Wars: Episode I - The Phantom Menace","genre_ids":[12,28,878],"backdrop_path":"\/wdp4unWJWY9hGKN1tM56HeSt6PZ.jpg","adult":false,"overview":"Anakin Skywalker, a young slave strong with the Force, is discovered on Tatooine. Meanwhile, the evil Sith have returned, enacting their plot for revenge against the Jedi.","release_date":"1999-05-19"},{"vote_average":7,"vote_count":3766,"id":1895,"video":false,"media_type":"movie","title":"Star Wars: Episode III - Revenge of the Sith","popularity":4.465482,"poster_path":"\/tgr5Pdy7ehZYBqBkN2K7Q02xgOb.jpg","original_language":"en","original_title":"Star Wars: Episode III - Revenge of the Sith","genre_ids":[878,12,28],"backdrop_path":"\/wUYTfFbfPiZC6Lcyt1nonr69ZmK.jpg","adult":false,"overview":"Years after the onset of the Clone Wars, the noble Jedi Knights lead a massive clone army into a galaxy-wide battle against the Separatists. When the sinister Sith unveil a thousand-year-old plot to rule the galaxy, the Republic crumbles and from its ashes rises the evil Galactic Empire. Jedi hero Anakin Skywalker is seduced by the dark side of the Force to become the Emperor's new apprentice – Darth Vader. The Jedi are decimated, as Obi-Wan Kenobi and Jedi Master Yoda are forced into hiding. The only hope for the galaxy are Anakin's own offspring – the twin children born in secrecy who will grow up to become heroes.","release_date":"2005-05-17"},{"vote_average":6.4,"vote_count":3654,"id":1894,"video":false,"media_type":"movie","title":"Star Wars: Episode II - Attack of the Clones","popularity":4.360749,"poster_path":"\/2vcNFtrZXNwIcBgH5e2xXCmVR8t.jpg","original_language":"en","original_title":"Star Wars: Episode II - Attack of the Clones","genre_ids":[12,28,878],"backdrop_path":"\/560F7BPaxRy8BsOfVU6cW4ivM46.jpg","adult":false,"overview":"Ten years after the invasion of Naboo, the galaxy is on the brink of civil war. Under the leadership of a renegade Jedi named Count Dooku, thousands of solar systems threaten to break away from the Galactic Republic. When an assassination attempt is made on Senator Padmé Amidala, the former Queen of Naboo, twenty-year-old Jedi apprentice Anakin Skywalker is assigned to protect her. In the course of his mission, Anakin discovers his love for Padmé as well as his own darker side. Soon, Anakin, Padmé, and Obi-Wan Kenobi are drawn into the heart of the Separatist movement and the beginning of the Clone Wars.","release_date":"2002-05-15"},{"original_name":"Lego Star Wars: The Freemaker Adventures","id":66837,"media_type":"tv","name":"Lego Star Wars: The Freemaker Adventures","vote_count":3,"vote_average":7.33,"poster_path":"\/1uI5ZG2eGEV25n3klN4M1SrJCl0.jpg","first_air_date":"2016-06-20","popularity":1.93042,"genre_ids":[16],"original_language":"en","backdrop_path":"\/dsZl8Z5KDugiiBFYIFCnhK4t7oi.jpg","overview":"Set between The Empire Strikes Back and Return of the Jedi, The Freemaker Adventures centers on a family of three young siblings—young boy Rowan, his sister Kordi, and their brother Zander—known as the Freemakers, who salvage parts from destroyed or damaged ships which they use to build new ones, which they sell in order to make their living. They are accompanied by their salvaged battle droid Roger.","origin_country":["US"]},{"original_name":"Lego Star Wars - The Complete Saga","id":69434,"media_type":"tv","name":"Lego Star Wars - The Complete Saga","vote_count":0,"vote_average":0,"poster_path":"\/p0Uu1rQeM7Ia7LN8R4EPwzBb12d.jpg","first_air_date":"2014-04-05","popularity":1.292019,"genre_ids":[16],"original_language":"en","backdrop_path":null,"overview":"","origin_country":["US"]}]}]};
	var repoData = {
  "id": 24195339,
  "name": "angular",
  "full_name": "angular/angular",
};
	var movieApi = {
		/*search: function(query) {
			return movieData;
		}*/		
	};
	var $httpBackend;

	beforeEach(angular.mock.module('movie'));
	//$http is not available in test environment we nee to provide it
	beforeEach(angular.mock.inject(function(_movieApi_, _$httpBackend_){
			movieApi = _movieApi_;
			$httpBackend = _$httpBackend_;
		}));

	it('should return search movie data', function() {
		var response;
		//var expectedUrl = 'https://api.themoviedb.org/3/movie/550?api_key=1dec39d1390f102f1795b7ddb8d85160';
		var expectedUrl = function(url) {
			console.log('url='+url);
			return url.indexOf('https://api.themoviedb.org') !== -1;
		};
		//var expectedUrl = /^https:\/\/api.themoviedb.org/;
		$httpBackend.when('GET', expectedUrl)
			.respond(200, movieData);
		movieApi.search('star wars')
			.then(function(data) {
				response = data;
				//console.log(angular.mock.dump(response)); //dump=console.log
			});
		$httpBackend.flush();
		expect(response).toEqual(movieData);
	})

	it('should handel error', function() {
		var response;
		var expectedUrl = /^https:\/\/api.themoviedb.org/;
		$httpBackend.when('GET', expectedUrl)
			.respond(500);
		movieApi.find('4194')
			.then(function(data) {
				reponse = data;
			})
			.catch(function() {
				response = 'Error!';
				//console.log(angular.mock.dump(response)); //dump=console.log
			});
		$httpBackend.flush();
		expect(response).toEqual('Error!');
	})
	
	it('should return search movie repo data', function() {
		var response;
		var expectedUrl = /^https:\/\/api.themoviedb.org/;
		$httpBackend.when('GET', expectedUrl)
			.respond(200, repoData);
		movieApi.find('4194')
			.then(function(data) {
				response = data;
				//console.log(angular.mock.dump(response)); //dump=console.log
			});
		$httpBackend.flush();
		expect(response).toEqual(repoData);
	})

});